<Window
    x:Class="GymClient.AuthorizationView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converter="clr-namespace:GymClient.Utils"
    xmlns:local="clr-namespace:GymClient.Services"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    Width="400"
    Height="450"
    WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <converter:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </Window.Resources>

    <!--  Main  -->
    <Border
        Padding="0"
        Background="{DynamicResource MaterialDesignPaper}"
        BorderBrush="#99BFE8FF"
        BorderThickness="1"
        CornerRadius="12"
        SnapsToDevicePixels="True">

        <materialDesign:DialogHost
            x:Name="AuthDialogHost"
            ApplyBlurBackground="True"
            BlurRadius="10">
            <Grid>
                <Grid HorizontalAlignment="Center" VerticalAlignment="Center">

                    <!--  Main Content  -->
                    <Border
                        Width="300"
                        Height="400"
                        Padding="20"
                        Background="{DynamicResource MaterialDesignPaper}"
                        CornerRadius="8">

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">

                            <materialDesign:PackIcon
                                Width="50"
                                Height="50"
                                Margin="0,24,0,16"
                                HorizontalAlignment="Center"
                                Foreground="#03A9F4"
                                Kind="HumanRunFast" />

                            <Grid Margin="0,10,0,0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <materialDesign:PackIcon
                                    Grid.Row="0"
                                    Width="20"
                                    Height="20"
                                    VerticalAlignment="Center"
                                    Foreground="#03A9F4"
                                    Kind="Account" />
                                <TextBox
                                    Grid.Row="0"
                                    Width="220"
                                    Margin="30,0,0,0"
                                    Padding="0,5"
                                    materialDesign:HintAssist.Hint="Логин"
                                    materialDesign:TextFieldAssist.HasClearButton="True"
                                    Background="Transparent"
                                    BorderThickness="0,0,0,1"
                                    Foreground="{DynamicResource MaterialDesignBody}"
                                    Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                    Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}" />

                                <materialDesign:PackIcon
                                    Grid.Row="1"
                                    Width="20"
                                    Height="20"
                                    Margin="0,20,0,0"
                                    VerticalAlignment="Center"
                                    Foreground="#03A9F4"
                                    Kind="Lock" />
                                <PasswordBox
                                    Grid.Row="1"
                                    Width="220"
                                    Margin="30,20,0,0"
                                    Padding="0,5"
                                    materialDesign:HintAssist.Hint="Пароль"
                                    materialDesign:PasswordBoxAssist.Password="{Binding Password, Mode=TwoWay}"
                                    materialDesign:TextFieldAssist.HasClearButton="True"
                                    Background="Transparent"
                                    BorderThickness="0,0,0,1"
                                    Foreground="{DynamicResource MaterialDesignBody}"
                                    Style="{StaticResource MaterialDesignFloatingHintRevealPasswordBox}" />
                            </Grid>

                            <Button
                                x:Name="LoginBtn"
                                Width="250"
                                Height="35"
                                Margin="0,25"
                                Command="{Binding LoginCommand}"
                                Content="Войти"
                                Style="{StaticResource MaterialDesignRaisedButton}"
                                ToolTip="Войти" />
                        </StackPanel>
                    </Border>
                </Grid>

                <!--  Loading Overlay  -->
                <Grid
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Background="#80000000"
                    IsHitTestVisible="True"
                    Visibility="{Binding Source={x:Static local:LoadingBarService.Instance}, Path=IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
                    <ProgressBar
                        Width="100"
                        Height="6"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Foreground="#03A9F4"
                        IsIndeterminate="True"
                        Style="{StaticResource MaterialDesignCircularProgressBar}"
                        Value="0" />
                </Grid>
            </Grid>
        </materialDesign:DialogHost>
    </Border>
</Window>
